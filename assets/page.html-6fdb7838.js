import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as l,o,c as r,e as d,a as e,d as s,b as i,f as a}from"./app-47b778c3.js";const c={},u=a('<h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><p>买了一台vps做科学上网，却仅仅只做了科学上网！这不符合我们勤俭节约的理念，所以《高效使用你的VPS》将会教大家如何高效地榨干vps，以获得最大的收益。《高效使用你的VPS》未来可能持续更新（我得自己先体验过才会看情况值不值得更新）。</p><h2 id="准备" tabindex="-1"><a class="header-anchor" href="#准备" aria-hidden="true">#</a> 准备</h2><p>本期教程所需要的东西：</p><ul><li>域名一个（推荐解析到CloudFlare，有免费的CDN）</li><li>vps云服务器一台，预装Linux系统</li><li>手</li></ul><h2 id="搭建" tabindex="-1"><a class="header-anchor" href="#搭建" aria-hidden="true">#</a> 搭建</h2>',6),p={href:"https://www.bt.cn/",target:"_blank",rel:"noopener noreferrer"},m=a('<h3 id="navidrome优缺点" tabindex="-1"><a class="header-anchor" href="#navidrome优缺点" aria-hidden="true">#</a> Navidrome优缺点</h3><p><strong>优点：</strong></p><ul><li>内存占用低（待机状态40Mb左右）</li><li>界面简洁，支持中文</li><li>支持Subsonic API，也就是说Subsonic能用的客户端，Navidrome都能用</li></ul><p><strong>缺点：</strong></p><ul><li>好像没法显示歌词</li><li>不支持通过界面删除歌曲（作者说的是为了安全考虑，我个人感觉过于谨慎了）</li></ul><h3 id="安装docker" tabindex="-1"><a class="header-anchor" href="#安装docker" aria-hidden="true">#</a> 安装docker</h3><p>直接在宝塔面板的应用商店里面下载就可以了</p>',7),_={href:"https://pic.sky350.cn/images/1211_1.png",target:"_blank",rel:"noopener noreferrer"},h=e("img",{src:"https://pic.sky350.cn/images/1211_1.png",alt:"1211_1",tabindex:"0",loading:"lazy"},null,-1),v=e("figcaption",null,"1211_1",-1),g=e("h3",{id:"安装docker-compose",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#安装docker-compose","aria-hidden":"true"},"#"),s(" 安装docker-compose")],-1),b=e("p",null,"这时候一般是没有安装docker-compose的，大家可以连接ssh敲一下docker-compose看看有没有下面的提示，没有的话就得安装。",-1),f={href:"https://pic.sky350.cn/images/1211_2.png",target:"_blank",rel:"noopener noreferrer"},x=e("img",{src:"https://pic.sky350.cn/images/1211_2.png",alt:"img",tabindex:"0",loading:"lazy"},null,-1),k=e("figcaption",null,"img",-1),y=a(`<p>安装也不难，首先设置国内镜像源</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vi /etc/docker/daemon.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>写入下面的内容</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{ &quot;registry-mirrors&quot;: [&quot;https://cq20bk8v.mirror.aliyuncs.com&quot;] }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>按esc键 在输入 :wq</p><p>四条命令敲一下</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum install epel-release
yum install python3-pip 
pip3 install --upgrade pip 
pip3 install docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若是报错：ModuleNotFoundError: No module named ‘setuptools_rust’</p><p>解决方法：pip3 install -U pip setuptools</p><p>这一步就完成了</p><h3 id="部署navidrome" tabindex="-1"><a class="header-anchor" href="#部署navidrome" aria-hidden="true">#</a> 部署navidrome</h3><p>这一步还是比较简单的，宝塔面板—-&gt;文件，点击根目录就到vps的根目录了，选择一个位置用来存放歌曲，我个人则是在home目录下创建了个music文件夹，music里面再创建两个文件夹，一个data，一个song，前者用来存放缓存，后者用来存放歌曲。</p>`,12),q={href:"https://pic.sky350.cn/images/1211_3.png",target:"_blank",rel:"noopener noreferrer"},N=e("img",{src:"https://pic.sky350.cn/images/1211_3.png",alt:"1211_3",tabindex:"0",loading:"lazy"},null,-1),S=e("figcaption",null,"1211_3",-1),E=a(`<p>此外，仍需在music目录下创建一个名为<code>docker-compose.yaml</code>的文件，双击编辑，内容复制下面的内容。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>version: &quot;3&quot;
services:
  navidrome:
    container_name: navidrome
    image: deluan/navidrome:latest
    user: 0:0 #0:0代表用root用户运行
    ports:
      - &quot;4533:4533&quot;
    restart: unless-stopped
    environment:
      # Optional: put your config options customization here. Examples:
      ND_SCANSCHEDULE: 1h
      ND_LOGLEVEL: info  
      ND_SESSIONTIMEOUT: 24h
      ND_BASEURL: &quot;&quot;
      ND_ENABLETRANSCODINGCONFIG: &quot;true&quot;
      ND_TRANSCODINGCACHESIZE: &quot;4000M&quot;
      ND_IMAGECACHESIZE: &quot;1000M&quot;
      
    volumes:
      - &quot;/home/music/data:/data&quot;
      - &quot;/home/music/song:/music:ro&quot;

  miniserve:
    image: svenstaro/miniserve:latest
    depends_on:
      - navidrome
    ports:
      - &quot;4534:4534&quot;
    volumes:
      - &quot;/home/music/song:/downloads&quot;  
    command: &quot;-r -z -u -q -p 4534 -a admin:123456 /downloads&quot; 
    restart: unless-stopped
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：在安装navidrome的同时，我们顺便安装一个miniserve文件服务器，可以用来上传音乐文件，如果你存储音乐的文件夹和我不一样，请将两处<code>/home/music/song</code>都进行修改。</p><ul><li><code>/home/music/data</code>：用来存储navidrome缓存的位置</li><li><code>/home/music/song</code>：存储音乐文件的路径</li><li><code>admin:123456</code>：miniserve文件服务器的用户名和密码，格式 用户名:密码</li></ul><p>下面连接ssh</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cd /home/music
#先进入music目录
docker-compose up -d
#再输入上面这条命令开始部署
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),L={href:"https://pic.sky350.cn/images/1211_3_1.png",target:"_blank",rel:"noopener noreferrer"},C=e("img",{src:"https://pic.sky350.cn/images/1211_3_1.png",alt:"1211_3_1",tabindex:"0",loading:"lazy"},null,-1),I=e("figcaption",null,"1211_3_1",-1),z=e("p",null,"done就完成部署了。",-1),A=e("h3",{id:"配置-优化",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#配置-优化","aria-hidden":"true"},"#"),s(" 配置&优化")],-1),D=e("p",null,"打开IP:4533（navidrome），创建用户名和密码",-1),w={href:"https://pic.sky350.cn/images/1211_4.png",target:"_blank",rel:"noopener noreferrer"},O=e("img",{src:"https://pic.sky350.cn/images/1211_4.png",alt:"1211_4",tabindex:"0",loading:"lazy"},null,-1),P=e("figcaption",null,"1211_4",-1),M=e("p",null,"点击右上角头像，点击Personal，Language选择简体中文。",-1),V={href:"https://pic.sky350.cn/images/1211_4_1.png",target:"_blank",rel:"noopener noreferrer"},T=e("img",{src:"https://pic.sky350.cn/images/1211_4_1.png",alt:"1211_4_1",tabindex:"0",loading:"lazy"},null,-1),B=e("figcaption",null,"1211_4_1",-1),G=e("p",null,"当我们上传音乐文件之后，点击头像左边的图标可以快速扫描音乐文件。",-1),U={href:"https://pic.sky350.cn/images/1211_4_2.png",target:"_blank",rel:"noopener noreferrer"},F=e("img",{src:"https://pic.sky350.cn/images/1211_4_2.png",alt:"1211_4_2",tabindex:"0",loading:"lazy"},null,-1),H=e("figcaption",null,"1211_4_2",-1),R=e("p",null,"打开IP:4534（miniserve），输入我们预先设置的用户名和密码",-1),W={href:"https://pic.sky350.cn/images/1211_5.png",target:"_blank",rel:"noopener noreferrer"},Z=e("img",{src:"https://pic.sky350.cn/images/1211_5.png",alt:"1211_5",tabindex:"0",loading:"lazy"},null,-1),j=e("figcaption",null,"1211_5",-1),J={href:"https://pic.sky350.cn/images/1211_6.png",target:"_blank",rel:"noopener noreferrer"},K=e("img",{src:"https://pic.sky350.cn/images/1211_6.png",alt:"1211_6",tabindex:"0",loading:"lazy"},null,-1),Q=e("figcaption",null,"1211_6",-1),X=e("p",null,"到此工作就完成了，我们只需要将下载到的音乐上传到服务器就好了。",-1),Y={href:"https://pic.sky350.cn/images/1211_7.png",target:"_blank",rel:"noopener noreferrer"},$=e("img",{src:"https://pic.sky350.cn/images/1211_7.png",alt:"img",tabindex:"0",loading:"lazy"},null,-1),ee=e("figcaption",null,"img",-1),ne=a('<h3 id="适配app平台" tabindex="-1"><a class="header-anchor" href="#适配app平台" aria-hidden="true">#</a> 适配APP平台</h3><p>Navidrome 可以与以下所有 Subsonic 客户端兼容。</p><ul><li>iOS：play:Sub、 substreamer、 Amperfy和 iSub</li><li>安卓：DSub， Subtracks， substreamer， Ultrasonic和 Audinaut</li><li>桌面：Sublime Music (Linux) 和Sonixd (Windows/Linux/macOS)</li><li>CLI：Jellycli (Windows/Linux) 和STMP (Linux/macOS)</li></ul><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>Navidrome是一个非常不错的程序，就是大家需要想办法下载到自己喜欢的歌曲，而且，歌曲也会占用服务器的一部分空间，服务器比较闲的朋友可以拿来耍耍，或者家里有软路由的也可以直接搭建在软路由上。</p>',5);function ie(se,ae){const n=l("ExternalLinkIcon");return o(),r("div",null,[d(" more "),u,e("p",null,[s("本教程采用操作较为简单的docker安装，这里推荐大家安装宝塔面板（"),e("a",p,[s("https://www.bt.cn/"),i(n)]),s(" ） 再从宝塔面板一键安装，这样既方便建站，又方便对vps进行管理。安装宝塔面板非常简单，这里就不写了。")]),m,e("figure",null,[e("a",_,[h,i(n)]),v]),g,b,e("figure",null,[e("a",f,[x,i(n)]),k]),y,e("figure",null,[e("a",q,[N,i(n)]),S]),E,e("figure",null,[e("a",L,[C,i(n)]),I]),z,A,D,e("figure",null,[e("a",w,[O,i(n)]),P]),M,e("figure",null,[e("a",V,[T,i(n)]),B]),G,e("figure",null,[e("a",U,[F,i(n)]),H]),R,e("figure",null,[e("a",W,[Z,i(n)]),j]),e("figure",null,[e("a",J,[K,i(n)]),Q]),X,e("figure",null,[e("a",Y,[$,i(n)]),ee]),ne])}const oe=t(c,[["render",ie],["__file","page.html.vue"]]);export{oe as default};
